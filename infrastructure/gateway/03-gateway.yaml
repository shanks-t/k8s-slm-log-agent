---
# Gateway is the actual ingress point for your cluster
# This creates the Envoy Proxy pods that handle incoming traffic
# Think of it as: "Create an HTTP entry point for my services"
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: homelab-gateway
  namespace: envoy-gateway-system
spec:
  # Which GatewayClass to use (references 01-gatewayclass.yaml)
  gatewayClassName: eg

  # Listeners define what ports and protocols the Gateway accepts
  listeners:
    # HTTP listener on port 80
    - name: http
      protocol: HTTP
      port: 80
      # allowedRoutes controls which HTTPRoutes can attach to this listener
      allowedRoutes:
        namespaces:
          # Allow routes from all namespaces
          # This lets you create HTTPRoutes in any namespace to expose services
          from: All

  # You can add more listeners here later, such as:
  # - name: https
  #   protocol: HTTPS
  #   port: 443
  #   tls:
  #     certificateRefs:
  #       - name: my-tls-cert
